Video Link : https://youtu.be/TgdFA72crHM?si=UjitKtivoVuL7-Tr (นาทีที่ 00:00 - 24:27)

<h1> Software Development in the 21st Century By Martin Fowler (Schema & Schemaless) </h1>

การใช้ Schema เป็นความคิดที่ดีไหม ? และการใช้งานให้มีประสิทธิภาพ โดยแบ่งเป็น What และ When

<h2> 1. What ความเข้าใจเรื่อง Schema และ Schemaless </h2>
   เรามักจะนึกถึงฐานข้อมูลเชิงสัมพันธ์ เช่น ถ้าเราสร้างตารางฐานข้อมูล และต้องการแทรกข้อมูลลงในตารางนั้น เราต้องปฏิบัติตาม Schema ที่กำหนดไว้ และถ้าหากพยายามแทรกสิ่งที่ไม่ได้กำหนดไว้ใน Schema จะไม่สามารถใส่ข้อมูลลงไปได้ 
แต่สำหรับ Schemaless เป็นฐานข้อมูลแบบไม่ซับซ้อน ทำให้เราสามารถจัดเก็บอะไรก็ได้ตามที่ต้องการ  

- Explicit Schema (ฐานข้อมูลเชิงสัมพันธ์): เปรียบเสมือนกฎเหล็ก (Storage Schema) ที่บังคับว่าข้อมูลต้องหน้าตาเป็นอย่างไรก่อนจะบันทึกลงไป หากไม่ตรงตามกฎ ฐานข้อมูลจะปฏิเสธการจัดเก็บทันที

- Schemaless & Implicit Schema (โครงสร้างแฝง): ถึงแม้ฐานข้อมูล NoSQL จะอนุญาตให้เก็บอะไรก็ได้ แต่ Martin เน้นย้ำว่า "ความจริงแล้วไม่มีข้อมูลใดที่ไร้ Schema" เพราะสุดท้ายแล้วโค้ดที่เขียน หรืออ่านข้อมูลจะเป็นตัวกำหนด Schema เอง เช่น ถ้าโค้ดเรียกหาฟิลด์ customer_name แต่ในฐานข้อมูลไม่มี หรือใช้ชื่ออื่น ข้อมูลนั้นก็ไร้ความหมาย
  
<img width="500" height="500" alt="Image 21-1-2569 BE at 20 03" src="https://github.com/user-attachments/assets/cd43a03f-fad5-40b8-a150-5a7c17e8437c" /> 

- ข้อเสียที่ต้องระวัง: เมื่อไม่มี Schema ที่ชัดเจน การสืบค้นข้อมูล (Query) จะทำได้ยาก และเกิดความผิดพลาดได้ง่าย เช่น customers.find({‘zip’: 60601}) คำสั่งค้นหา zip แต่ข้อมูลบางส่วนถูกเก็บเป็น postcode หรือ zip_code ทำให้หาข้อมูลไม่พบ
  
<img width="800" height="800" alt="Image 21-1-2569 BE at 20 12" src="https://github.com/user-attachments/assets/06f9813a-ddd6-4abf-9abf-ad284c5011c9" />

<h2> 2. When ควรเลือกใช้แบบไหนให้มีประสิทธิภาพ? </h2> 

- ใช้ Explicit Schema เป็นหลัก (Default Option): สำหรับข้อมูลส่วนใหญ่ที่มีโครงสร้างชัดเจน และคงที่ การมี Schema ที่แน่นอนช่วยให้การทำ Indexing และการค้นหาข้อมูลมีประสิทธิภาพสูงสุด  

<h3> Schemaless เมื่อเจอ Non-uniform Data (ข้อมูลที่ไม่แน่นอน) </h3>  

- Custom Fields: เมื่อระบบต้องการให้ผู้ใช้เพิ่มฟิลด์ข้อมูลเองได้ตามใจชอบ
- Event Logging: ข้อมูลบันทึกเหตุการณ์ที่มีรายละเอียดต่างกันไปตามแต่ละประเภทของกิจกรรม  

การใช้ Predicate Schema: แทนที่จะให้ฐานข้อมูลเป็นตัวบังคับ (Storage Schema) ให้ใช้ Schema ในระดับ Application เพื่อทำการ Contextual Validation หมายถึง การตรวจสอบความถูกต้องของข้อมูลตามบริบท เช่น ในขั้นตอนการบันทึกอาจยอมให้ข้อมูลไม่ครบถ้วนได้ แต่ในขั้นตอนการส่งของ ข้อมูลที่จำเป็นต้องครบถ้วนตาม Schema ที่กำหนดไว้สำหรับบริบทนั้น

<h3> การย้ายโครงสร้างข้อมูล (Schema Migration) </h3>  

- การจัดการเวอร์ชัน: ควรบันทึก และเชื่อมโยงข้อมูลเข้ากับระบบควบคุมเวอร์ชัน (Version Control)
- กระบวนการย้ายข้อมูล: ควรใช้วิธีการย้ายข้อมูลขนาดเล็กจำนวนมาก (Small Migrations) สำหรับทุกการเปลี่ยนแปลง เพื่อค่อย ๆ ย้ายข้อมูลจากเวอร์ชันหนึ่งไปยังอีกเวอร์ชันหนึ่งอย่างเป็นระบบ

